---
// Props untuk Input component
const {
  label = "",
  showLabel = true,
  icon = "",
  placeholder = "",
  value = "",
  type = "text",
  name = "",
  id = "",
  required = false,
  disabled = false,
  error = false,
  customClass = "",
  fullWidth = false,
  isDatePicker = false,
  accept = "",
} = Astro.props;

// Base classes untuk input
const baseInputClasses = [
  "flex gap-2.5 items-center justify-start px-3 py-2.5 md:px-4 md:py-3 lg:px-5 lg:py-3.5 relative rounded-[25px] md:rounded-[30px] lg:rounded-[50px] w-full transition-all duration-200",
  "border border-[#e4e6eb] border-solid overflow-hidden",
  error ? "border-red-500" : "",
  disabled ? "opacity-50 cursor-not-allowed" : "cursor-text",
  fullWidth ? "w-full" : "",
  customClass,
]
  .filter(Boolean)
  .join(" ");

// Label classes
const labelClasses = [
  "leading-[0] not-italic relative shrink-0 text-16 text-black w-full",
]
  .filter(Boolean)
  .join(" ");

// Icon classes
const iconClasses = ["relative shrink-0 size-5 md:size-5 lg:size-6"]
  .filter(Boolean)
  .join(" ");

// Input text classes
const inputTextClasses = [
  "leading-[0] not-italic relative overflow-hidden shrink-0 text-16 text-black text-nowrap bg-transparent outline-none border-none flex-1 w-full",
  disabled ? "cursor-not-allowed" : "",
]
  .filter(Boolean)
  .join(" ");

// File input classes
const fileInputClasses = [
  "file-upload-input absolute inset-0 w-full h-full opacity-0 cursor-pointer",
  disabled ? "cursor-not-allowed" : "",
]
  .filter(Boolean)
  .join(" ");

// File display classes
const fileDisplayClasses = [
  "leading-[0] not-italic relative shrink-0 text-16 text-gray-500 text-nowrap bg-transparent outline-none border-none flex-1 w-full pointer-events-none pr-3 md:pr-4 lg:pr-5",
  disabled ? "cursor-not-allowed" : "",
]
  .filter(Boolean)
  .join(" ");
---

<div
  class="content-stretch flex flex-col gap-2 items-start justify-start relative size-full p-0.5"
>
  {
    showLabel && label && (
      <div class={labelClasses}>
        <p class="leading-[normal]">{label}</p>
      </div>
    )
  }

  <div
    class={`${baseInputClasses} focus-within:shadow-[0_0_0_2px_#ff48b6] ${type === 'file' ? 'cursor-pointer' : ''}`}
    data-input-container
  >
    {
      icon && (
        <div class={iconClasses} data-name="input-icon">
          <img alt="input icon" class="block max-w-none size-full" src={icon} />
        </div>
      )
    }

    {type === 'file' ? (
      <>
        <input
          type="file"
          name={name}
          id={id}
          accept={accept}
          required={required}
          disabled={disabled}
          class={fileInputClasses}
          data-input-field
        />
        <div class={fileDisplayClasses} data-file-display data-placeholder={placeholder || "Pilih file..."}>
          {value || placeholder || "Pilih file..."}
        </div>
      </>
    ) : (
      <input
        type={type}
        name={name}
        id={id}
        value={value}
        placeholder={placeholder}
        required={required}
        disabled={disabled}
        class={`${inputTextClasses} focus:outline-none placeholder:text-gray-400${isDatePicker ? " datepicker-input [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-inner-spin-button]:hidden [&::-webkit-outer-spin-button]:hidden" : ""}`}
        data-input-field
      />
    )}
  </div>
</div>
